<html><head><title>nope</title>

<script>
var peers = {}
bridge.msgPush.connect(incomingMsg);
function incomingMsg(message){
//document.getElementById("peerlist").innerHTML+="1";
  //msg = JSON.parse(message.message);
  id = message.peerID;
  name = message.peerName;
  if(!(id in peers)){//return;
  //document.getElementById("peerlist").innerHTML+="2";
      peers[id] = {"name":name}
      //console.log(msg);
      //document.getElementById("peerlist").innerHTML="";
      //for (peerid in peers){
          //console.log(peerid);
          //console.log(peers);
          //console.log(peers[peerid]);
          //document.getElementById("peerlist").innerHTML+="3";
          peerPanel = "<p id='"+id+"'>"+peers[id].name+"</p>";
          document.getElementById("peerlist").innerHTML+=peerPanel;
          //document.getElementById("peerlist").innerHTML+=peers[peerid]+"<br>";
          //document.getElementById("peerlist").innerHTML+="4";
      //}

   }
   //peerlist = document.getElementById("peerlist");
   //document.getElementById("peerlist").innerHTML+="5";
   //document.getElementById(id).children.namedItem("lastmsg").innerHTML+=message.message;
   peerPanel = peers[id].name+"<br/>Last message="+message.message;
   document.getElementById(id).innerHTML = peerPanel
   //document.getElementById(id).children.namedItem("lastmsg").innerHTML=message.message;
   //document.getElementById("peerlist").innerHTML+="6";

}
tick();
function tick(){
    var packetdata = {"type":"indexping","msg":"hi there"};
    bridgeWV.broadcastMessage(JSON.stringify(packetdata));
  //document.getElementById("peerlist").innerHTML="asd";
  //document.getElementById("demo").innerHTML="asd";
setTimeout(tick,1000);
}
</script>
</head>
</head><body>

<p> try these pages</p>
<a href="broadcastchat.html">Broadcast Chat</a> - low data<br/>
<a href="interactiveparticles.html">Broadcast Particles</a> - medium data - paints lots of circles with three.js<br/>
<a href="phystest.html">p2p Averaging Physics Test</a> - all clients control all objects<br/>
<a href="phystest2.html">p2p owned-objects Physics Test</a> - clients control their own objects<br/>
<!--
<p>old testing: Click the button to trigger a function.</p>

<br>
<button onclick="myFunction()">Click me</button>
<button onclick="testecho()">test echo</button>
<button onclick="bridgeWV.go2index2()">barefunc</button>
<button onclick="bridgeWV.go2page('index2.html')">richfunk</button>
<button onclick="bridgeWV.go2page('tindex.html')">to tindex</button>-->

<p id="demo"></p>
Compatable Peers:
<p id="peerlist"></p>
</body>
</html>
